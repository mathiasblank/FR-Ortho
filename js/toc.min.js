/*
toc project created by mab
Version 1.0
MIT license
*/
$(document).ready(function(){var t=function(){this.control=!1,this.defaultOptions="<br><code>var options = { <div style='margin:0 0 0 20px'><code>elements : [2,3,4,5,6], // or '*' for every html heading tag (1 to 6)<br> position : 'top',<br> animateScroll : true,<br> blinkingTexte : true,<br> container : 'body'</code></div>}</code>",this.containerId="toc",this.container='<div id="'+this.containerId+'"><ul></ul><div>',this.indentClass="toc-indent",this.click=!1,this.init()};t.prototype={init:function(){var t=this;if(8==Object.keys(options).length)if(elements=t.getElements(),0!=elements){t.setElementToList();var e=options.indentTitle?" "+t.indentClass:"";$("#"+this.containerId).addClass(e),"undefined"!=typeof options.animateScroll&&options.animateScroll&&t.tocScroll(),"string"==typeof options.title&&""!=options.title&&t.setTitle()}else t.errorMsg();else t.errorMsg()},setTitle:function(){var t=this;"undefined"!=typeof options&&"undefined"!=typeof options.title&&""!=options.title&&$("#"+t.containerId).prepend("<h3><span>"+options.title+"</span></h3>"),options.slide&&($title=$("#"+t.containerId).children("h3"),$title.children("span").addClass("toc-slide toc-open"),$title.children("span").click(function(){t.click||(t.click=!0,$("#"+t.containerId).children("ul").slideToggle(300,function(){$title.children("span").toggleClass("toc-open toc-close"),t.click=!1}))}))},getElements:function(){if("undefined"!=typeof options&&"undefined"!=typeof options.elements&&""!=options.elements){var t=options.elements;"string"==typeof t&&"*"==t&&(t=[1,2,3,4,5,6]);for(var e="",n=t.length-1;n>=0;n--)e+="h"+t[n],n>0&&(e+=", ");return e}return 0},setElementToList:function(){var t=this,e=t.getElements();$tiles=$(e);var n=0;t.setContainer(),$tiles.each(function(){id="toc_"+n,$(this).attr("id",id),$currentRank=$(this)[0].tagName.toLowerCase().replace("h",""),$texte=$(this).text(),$element='<li class="toc-'+$currentRank+'"><a href="#'+id+'">'+$texte+"</a></li>",$("#toc > ul").append($element),$lastRank=$currentRank,n++})},tocScroll:function(){var t=this;$("#"+t.containerId+" a").click(function(){var t=$(this).attr("href");$("html,body").animate({scrollTop:$(t).offset().top},300,function(){"undefined"!=typeof options.blinkingTexte&&options.blinkingTexte&&$(t).animate({opacity:.4},200,function(){$(this).animate({opacity:1},200)})})})},setContainer:function(){var t=this;if("undefined"!=typeof options.position)switch(options.position){case"top":$(options.container).prepend(t.container);break;case"bottom":$(options.container).append(t.container);break;case"left":$(options.container).prepend(t.container),$("#"+t.containerId).css({top:0,left:0,position:"fixed"}).addClass("toc-float-left");break;case"right":$(options.container).prepend(t.container),$("#"+t.containerId).css({top:0,right:0,position:"fixed"}).addClass("toc-float-right")}else t.errorMsg()()},errorMsg:function(){var t=this;t.setContainer(),$("#"+t.containerId).css({position:"relative"}),$("#"+t.containerId).append('<h1 style="color:red">TocGenerator error! There is a problem with the configuration.</h1>'),$("#"+t.containerId).append('<p"><b>Here is a default configuration (options.js): </b>'+t.defaultOptions+"</p>")}},t.prototype.constructor=t;new t});